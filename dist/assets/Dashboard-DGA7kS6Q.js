import{j as e}from"./ui-CdL_9Vn8.js";import{a,L as N}from"./vendor-f9TeDfvc.js";import{C as o,b as n,c as p,a as x}from"./card-CF3W8kwi.js";import{c as w,s as c}from"./index-BI6xzpnh.js";import{F as C}from"./file-text-Di39vAyR.js";import{f as D}from"./utils-73O3M1Kq.js";const _=w("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]),A=()=>{const[r,m]=a.useState({posts:0,pages:0}),[i,h]=a.useState([]),[d,u]=a.useState(!0);a.useEffect(()=>{(async()=>{try{const{count:l}=await c.from("posts").select("*",{count:"exact",head:!0}),{count:g}=await c.from("pages").select("*",{count:"exact",head:!0});m({posts:l||0,pages:g||0});const{data:j}=await c.from("posts").select("id, title, updated_at").order("updated_at",{ascending:!1}).limit(5),{data:y}=await c.from("pages").select("id, title, updated_at").order("updated_at",{ascending:!1}).limit(5),b=[...j?.map(s=>({...s,type:"post"}))||[],...y?.map(s=>({...s,type:"page"}))||[]].sort((s,v)=>new Date(v.updated_at).getTime()-new Date(s.updated_at).getTime()).slice(0,5);h(b)}catch(l){console.error("Error fetching dashboard data:",l)}finally{u(!1)}})()},[]);const f=[{label:"Total Posts",value:r.posts,icon:C,color:"text-blue-500"},{label:"Total Pages",value:r.pages,icon:_,color:"text-green-500"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(t=>e.jsxs(o,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-slate-500",children:t.label}),e.jsx(t.icon,{className:`w-4 h-4 ${t.color}`})]}),e.jsx(x,{children:e.jsx("div",{className:"text-2xl font-bold",children:d?"...":t.value})})]},t.label))}),e.jsxs(o,{children:[e.jsx(n,{children:e.jsx(p,{children:"Recent Activity"})}),e.jsx(x,{children:d?e.jsx("div",{className:"text-sm text-slate-500",children:"Loading..."}):i.length===0?e.jsx("div",{className:"text-sm text-slate-500",children:"No recent activity."}):e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-2 last:border-0 last:pb-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:t.title}),e.jsxs("p",{className:"text-xs text-slate-500 capitalize flex items-center gap-1",children:[t.type," â€¢ ",D(new Date(t.updated_at),"MMM d, yyyy")]})]}),e.jsx(N,{to:`/admin/${t.type}s/edit/${t.id}`,className:"text-sm text-brand-blue hover:underline",children:"Edit"})]},`${t.type}-${t.id}`))})})]})]})};export{A as default};
