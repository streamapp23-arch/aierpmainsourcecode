import{j as e}from"./ui-CdL_9Vn8.js";import{k as S,i as N,a as r}from"./vendor-f9TeDfvc.js";import{s as l,u as o}from"./index-BI6xzpnh.js";import{B as x}from"./button-Ck2er7XV.js";import{I as v}from"./input-B7aYlZNs.js";import{A as b,S as y,R as C}from"./RichTextEditor-DrK5tTQN.js";import"./utils-73O3M1Kq.js";import"./index-Cy8jiuRe.js";import"./charts-fEMqUGwj.js";import"./quote-ChqGlwTj.js";import"./image-Bp141l8u.js";import"./plus-BlPqUiZ_.js";import"./trash-2-BjnNUU2X.js";const U=()=>{const{id:t}=S(),n=N(),[c,d]=r.useState(!1),[i,m]=r.useState(""),[p,g]=r.useState(""),[u,f]=r.useState("");r.useEffect(()=>{t&&j(t)},[t]);const j=async s=>{try{const{data:a,error:h}=await l.from("pages").select("*").eq("id",s).single();if(h)throw h;a&&(m(a.title),g(a.content),f(a.slug))}catch{o.error("Failed to fetch page")}},w=async()=>{if(!i)return o.error("Title is required");d(!0);try{const s={title:i,content:p,slug:u||i.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),updated_at:new Date().toISOString()};if(t){const{error:a}=await l.from("pages").update(s).eq("id",t);if(a)throw a;o.success("Page updated")}else{const{error:a}=await l.from("pages").insert([s]);if(a)throw a;o.success("Page created"),n("/admin/pages")}}catch(s){o.error(s.message||"Failed to save page")}finally{d(!1)}};return e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(x,{variant:"ghost",onClick:()=>n("/admin/pages"),children:[e.jsx(b,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsxs(x,{onClick:w,disabled:c,className:"bg-brand-blue",children:[e.jsx(y,{className:"w-4 h-4 mr-2"})," ",c?"Saving...":"Save Page"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(v,{placeholder:"Page Title",className:"text-3xl font-bold h-auto py-4 px-0 border-0 border-b rounded-none focus-visible:ring-0 placeholder:text-slate-300",value:i,onChange:s=>m(s.target.value)}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[e.jsx("span",{className:"text-sm",children:"URL Slug:"}),e.jsx(v,{placeholder:"page-slug",className:"h-8 w-64",value:u,onChange:s=>f(s.target.value)})]}),e.jsx("div",{className:"min-h-[500px]",children:e.jsx(C,{value:p,onChange:g,placeholder:"Write your page content..."})})]})]})};export{U as default};
