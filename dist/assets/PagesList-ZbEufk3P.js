import{j as e}from"./ui-CdL_9Vn8.js";import{a as i,L as c}from"./vendor-f9TeDfvc.js";import{c as g,s as h,u as x}from"./index-BI6xzpnh.js";import{B as r}from"./button-Ck2er7XV.js";import{T as f,a as b,b as l,c as n,d as y,e as t,S as N}from"./table-B79f0gsR.js";import{P as w}from"./plus-BlPqUiZ_.js";import{T as v}from"./trash-2-BjnNUU2X.js";import"./utils-73O3M1Kq.js";const L=g("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),C=()=>{const[d,m]=i.useState([]),[j,p]=i.useState(!0);i.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:s,error:a}=await h.from("pages").select("*").order("updated_at",{ascending:!1});if(a)throw a;m(s||[])}catch(s){console.error("Error fetching pages:",s)}finally{p(!1)}},u=async s=>{if(confirm("Are you sure you want to delete this page?"))try{const{error:a}=await h.from("pages").delete().eq("id",s);if(a)throw a;x.success("Page deleted"),o()}catch{x.error("Failed to delete page")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Pages"}),e.jsx(c,{to:"/admin/pages/new",children:e.jsxs(r,{className:"bg-brand-blue hover:bg-brand-blue/90",children:[e.jsx(w,{className:"w-4 h-4 mr-2"})," New Page"]})})]}),e.jsx("div",{className:"bg-white rounded-lg border shadow-sm",children:e.jsxs(f,{children:[e.jsx(b,{children:e.jsxs(l,{children:[e.jsx(n,{children:"Title"}),e.jsx(n,{children:"Slug"}),e.jsx(n,{children:"Last Updated"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(y,{children:j?e.jsx(l,{children:e.jsx(t,{colSpan:4,className:"text-center py-8",children:"Loading..."})}):d.length===0?e.jsx(l,{children:e.jsx(t,{colSpan:4,className:"text-center py-8 text-slate-500",children:"No pages found. Create your first one!"})}):d.map(s=>e.jsxs(l,{children:[e.jsx(t,{className:"font-medium",children:s.title}),e.jsx(t,{children:e.jsxs("code",{className:"bg-slate-100 px-2 py-1 rounded text-sm",children:["/",s.slug]})}),e.jsx(t,{children:new Date(s.updated_at).toLocaleDateString()}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{to:`/p/${s.slug}`,target:"_blank",children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(L,{className:"w-4 h-4 text-slate-500"})})}),e.jsx(c,{to:`/admin/pages/${s.id}`,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(N,{className:"w-4 h-4 text-slate-500"})})}),e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>u(s.id),children:e.jsx(v,{className:"w-4 h-4 text-red-500"})})]})})]},s.id))})]})})]})};export{C as default};
