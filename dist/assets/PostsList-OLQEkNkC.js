import{j as e}from"./ui-BLUv2tW2.js";import{a as n,L as x}from"./vendor-f9TeDfvc.js";import{s as h,u}from"./index-DJcS8j5y.js";import{B as c}from"./button-BMVttRVi.js";import{T as y,a as N,b as l,c as r,d as w,e as a,S as P}from"./table-Dl9LsY2t.js";import{P as S}from"./plus-CHyRnLNe.js";import{T}from"./trash-2-Bjhfi4SH.js";import"./utils-73O3M1Kq.js";const $=()=>{const[d,m]=n.useState([]),[j,p]=n.useState(!0);n.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:s,error:t}=await h.from("posts").select("*").order("created_at",{ascending:!1});if(t)throw t;m(s||[])}catch(s){console.error("Error fetching posts:",s)}finally{p(!1)}},f=async s=>{if(confirm("Are you sure you want to delete this post?"))try{const{error:t}=await h.from("posts").delete().eq("id",s);if(t)throw t;u.success("Post deleted"),o()}catch{u.error("Failed to delete post")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Posts"}),e.jsx(x,{to:"/admin/posts/new",children:e.jsxs(c,{className:"bg-brand-blue hover:bg-brand-blue/90",children:[e.jsx(S,{className:"w-4 h-4 mr-2"})," New Post"]})})]}),e.jsx("div",{className:"bg-white rounded-lg border shadow-sm",children:e.jsxs(y,{children:[e.jsx(N,{children:e.jsxs(l,{children:[e.jsx(r,{children:"Category"}),e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Date"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(w,{children:j?e.jsx(l,{children:e.jsx(a,{colSpan:5,className:"text-center py-8",children:"Loading..."})}):d.length===0?e.jsx(l,{children:e.jsx(a,{colSpan:5,className:"text-center py-8 text-slate-500",children:"No posts found. Create your first one!"})}):d.map(s=>{const t=s.publish_date||s.created_at,i=s.status||"published",b={published:"bg-green-100 text-green-800",scheduled:"bg-blue-100 text-blue-800",draft:"bg-gray-100 text-gray-800"},g={published:"Published",scheduled:"Scheduled",draft:"Draft"};return e.jsxs(l,{children:[e.jsx(a,{children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${s.category==="WhitePaper"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:s.category||"Blog"})}),e.jsx(a,{className:"font-medium",children:s.title}),e.jsx(a,{children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b[i]}`,children:g[i]})}),e.jsxs(a,{children:[new Date(t).toLocaleDateString(),i==="scheduled"&&s.publish_date&&e.jsx("span",{className:"text-xs text-slate-500 block",children:new Date(s.publish_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx(a,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{to:`/admin/posts/${s.id}`,children:e.jsx(c,{variant:"ghost",size:"icon",children:e.jsx(P,{className:"w-4 h-4 text-slate-500"})})}),e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>f(s.id),children:e.jsx(T,{className:"w-4 h-4 text-red-500"})})]})})]},s.id)})})]})})]})};export{$ as default};
